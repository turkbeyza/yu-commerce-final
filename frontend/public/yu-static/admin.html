<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YU Admin - Product Management</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico?v=1">
    <link rel="stylesheet" href="./style.css" />
    <script>
        window.YU_API_URL = window.location.hostname === 'localhost'
            ? 'http://localhost:5000/api'
            : 'https://yu-commerce-final.onrender.com/api';
    </script>
</head>

<body class="admin-body">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-container">
            <div class="admin-left">
                <a class="logo" href="./index.html" aria-label="YU home">YU</a>
                <span class="admin-badge">Admin Panel</span>
            </div>
            <div class="admin-right" id="adminRight" style="display: none;">
                <span class="admin-user" id="adminUserName">üë§ Admin</span>
                <button class="btn-logout" id="logoutBtn">Logout</button>
            </div>
        </div>
    </header>

    <!-- Access Denied Section (shown when not admin) -->
    <section class="admin-login-section" id="accessDeniedSection" style="display: none;">
        <div class="admin-login-card">
            <div class="login-header">
                <h2>üîí Access Denied</h2>
                <p class="muted" id="accessMessage">Admin privileges required</p>
            </div>
            <div class="access-info">
                <p>Bu sayfa sadece admin kullanƒ±cƒ±lar i√ßindir.</p>
                <p class="muted">Ana sayfadan <strong>admin@yucommerce.com</strong> ile giri≈ü yapƒ±n.</p>
            </div>
            <a href="./index.html" class="btn-primary full"
                style="display: block; text-align: center; text-decoration: none; margin-top: 1.5rem;">
                Ana Sayfaya Git
            </a>
        </div>
    </section>

    <!-- Main Admin Content (shown when logged in as admin) -->
    <main class="admin-main" id="adminMain" style="display: none;">
        <!-- Dashboard Stats -->
        <section class="admin-dashboard">
            <div class="stat-card">
                <div class="stat-icon">üì¶</div>
                <div class="stat-info">
                    <span class="stat-value" id="totalProducts">0</span>
                    <span class="stat-label">Total Products</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìÇ</div>
                <div class="stat-info">
                    <span class="stat-value" id="totalCategories">0</span>
                    <span class="stat-label">Categories</span>
                </div>
            </div>
            <div class="stat-card warning">
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-info">
                    <span class="stat-value" id="lowStockCount">0</span>
                    <span class="stat-label">Low Stock Items</span>
                </div>
            </div>
            <div class="stat-card success">
                <div class="stat-icon">üí∞</div>
                <div class="stat-info">
                    <span class="stat-value" id="totalRevenue">$0</span>
                    <span class="stat-label">Total Revenue</span>
                </div>
            </div>
        </section>

        <!-- Add Product Section -->
        <section class="admin-section">
            <div class="section-header">
                <h3>‚ûï Add New Product</h3>
                <button class="btn-toggle" id="toggleAddForm">
                    <span id="toggleIcon">‚ñº</span>
                </button>
            </div>
            <div class="add-product-form-wrapper" id="addFormWrapper">
                <form id="addProductForm" class="product-form">
                    <div class="form-grid">
                        <div class="field">
                            <label>Product Name *</label>
                            <input type="text" id="productName" placeholder="iPhone 15 Pro" required />
                        </div>
                        <div class="field">
                            <label>Price *</label>
                            <input type="number" id="productPrice" placeholder="999" min="0" step="0.01" required />
                        </div>
                        <div class="field">
                            <label>Category *</label>
                            <select id="productCategory" required>
                                <option value="">Select category...</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Stock *</label>
                            <input type="number" id="productStock" placeholder="50" min="0" required />
                        </div>
                        <div class="field">
                            <label>Rating (0-5)</label>
                            <input type="number" id="productRating" placeholder="4.5" min="0" max="5" step="0.1" />
                        </div>
                        <div class="field">
                            <label>Image (emoji or URL)</label>
                            <input type="text" id="productImage" placeholder="üì±" />
                        </div>
                        <div class="field">
                            <label>Tag</label>
                            <select id="productTag">
                                <option value="">No tag</option>
                                <option value="Bestseller">Bestseller</option>
                                <option value="New">New</option>
                                <option value="Hot">Hot</option>
                                <option value="Sale">Sale</option>
                                <option value="Featured">Featured</option>
                            </select>
                        </div>
                        <div class="field full-width">
                            <label>Description</label>
                            <textarea id="productDescription" placeholder="Product description..." rows="3"></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="reset" class="btn-secondary">Clear</button>
                        <button type="submit" class="btn-primary">Add Product</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Products List Section -->
        <section class="admin-section">
            <div class="section-header">
                <h3>üìã Product List</h3>
                <div class="section-actions">
                    <input type="text" id="searchProducts" placeholder="üîç Search products..." class="search-input" />
                    <button class="btn-refresh" id="refreshBtn">üîÑ Refresh</button>
                </div>
            </div>
            <div class="products-table-wrapper">
                <table class="products-table" id="productsTable">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Rating</th>
                            <th>Tag</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="productsTableBody">
                        <!-- Products will be loaded here -->
                    </tbody>
                </table>
                <div class="table-loading" id="tableLoading">
                    <span class="spinner"></span> Loading products...
                </div>
                <div class="table-empty" id="tableEmpty" style="display: none;">
                    <span>üì¶</span>
                    <p>No products found</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Edit Product Modal -->
    <div class="modal" id="editModal" aria-hidden="true">
        <div class="modal-card wide">
            <button class="modal-close" id="closeEditModal" aria-label="Close">‚úñ</button>
            <div class="edit-modal-body">
                <h3>‚úèÔ∏è Edit Product</h3>
                <form id="editProductForm" class="product-form">
                    <input type="hidden" id="editProductId" />
                    <div class="form-grid">
                        <div class="field">
                            <label>Product Name *</label>
                            <input type="text" id="editName" required />
                        </div>
                        <div class="field">
                            <label>Price *</label>
                            <input type="number" id="editPrice" min="0" step="0.01" required />
                        </div>
                        <div class="field">
                            <label>Category *</label>
                            <select id="editCategory" required>
                                <option value="">Select category...</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Stock *</label>
                            <input type="number" id="editStock" min="0" required />
                        </div>
                        <div class="field">
                            <label>Rating (0-5)</label>
                            <input type="number" id="editRating" min="0" max="5" step="0.1" />
                        </div>
                        <div class="field">
                            <label>Image</label>
                            <input type="text" id="editImage" />
                        </div>
                        <div class="field">
                            <label>Tag</label>
                            <select id="editTag">
                                <option value="">No tag</option>
                                <option value="Bestseller">Bestseller</option>
                                <option value="New">New</option>
                                <option value="Hot">Hot</option>
                                <option value="Sale">Sale</option>
                                <option value="Featured">Featured</option>
                            </select>
                        </div>
                        <div class="field full-width">
                            <label>Description</label>
                            <textarea id="editDescription" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelEdit">Cancel</button>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Stock Update Modal -->
    <div class="modal" id="stockModal" aria-hidden="true">
        <div class="modal-card" style="max-width: 400px;">
            <button class="modal-close" id="closeStockModal" aria-label="Close">‚úñ</button>
            <div class="stock-modal-body">
                <h3>üìä Update Stock</h3>
                <p class="muted" id="stockProductName">Product Name</p>
                <form id="stockForm">
                    <input type="hidden" id="stockProductId" />
                    <div class="field">
                        <label>Current Stock</label>
                        <input type="number" id="currentStock" disabled />
                    </div>
                    <div class="field">
                        <label>New Stock</label>
                        <input type="number" id="newStock" min="0" required />
                    </div>
                    <div class="stock-actions">
                        <button type="button" class="btn-stock-adjust" data-adjust="-10">-10</button>
                        <button type="button" class="btn-stock-adjust" data-adjust="-1">-1</button>
                        <button type="button" class="btn-stock-adjust" data-adjust="1">+1</button>
                        <button type="button" class="btn-stock-adjust" data-adjust="10">+10</button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelStock">Cancel</button>
                        <button type="submit" class="btn-primary">Update Stock</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal" aria-hidden="true">
        <div class="modal-card" style="max-width: 400px;">
            <div class="delete-modal-body">
                <div class="delete-icon">üóëÔ∏è</div>
                <h3>Delete Product?</h3>
                <p class="muted" id="deleteProductName">Are you sure you want to delete this product?</p>
                <div class="delete-actions">
                    <button class="btn-secondary" id="cancelDelete">Cancel</button>
                    <button class="btn-danger" id="confirmDelete">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" style="display:none;"></div>

    <!-- Toast Container -->
    <div class="toasts" id="toasts"></div>

    <script src="./admin.js"></script>
</body>

</html>